<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- 引入Pannellum全景图依赖 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css">
    <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <style>
        /* 全景图容器样式 */
        #panorama {
            width: 100%;
            height: 600px;
            margin: 0 auto;
            position: relative;
        }
        /* 飘雪特效 */
.snow {
  position: absolute;
  width: 10px; height: 10px;
  background: #fff; border-radius: 50%;
  opacity: 0.7;
  animation: snow-fall 5s linear infinite;
}
/* 藏式烟花CSS（粘贴到<style>） */
.firework {
  position: absolute;
  pointer-events: none;
  z-index: 999;
  transform: translate(-50%, -50%);
  width: 0;
  height: 0;
}
.firework-part {
  position: absolute;
  width: 6px; /* 从4px改成6px，更粗 */
  height: 25px; /* 从15px改成25px，更长 */
  background: linear-gradient(to top, #ff3333, #ff9933);
  border-radius: 50%;
  opacity: 1; /* 从0.9改成1，更亮 */
  animation: firework-burst 2s ease-out forwards; /* 从1.5s改成2s，绽放更久 */
}
@keyframes firework-burst {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 0.9;
  }
  100% {
    transform: translateY(-100px) rotate(720deg);
    opacity: 0;
  }
}
        /* 播放按钮样式 */
        .play-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ff3333;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            z-index: 998;
        }
/* 粒子特效CSS（粘贴到<style>里） */
.particle {
  position: absolute;
  pointer-events: none;
  z-index: 999; /* 保持不变 */
  background-size: contain;
  background-repeat: no-repeat;
  opacity: 1; /* 从0.8改成1，更亮 */
  animation: particle-fall 3s ease-out forwards; /* 从2s改成3s，飘得更久 */
}
/* 下面新增：放大粒子尺寸 */
.particle {
  width: 50px !important; /* 强制放大到50px */
  height: 50px !important;
}
@keyframes particle-fall {
  0% {
    transform: translate(0, 0) rotate(0deg);
    opacity: 0.8;
  }
  100% {
    transform: translate(0, 100px) rotate(360deg);
    opacity: 0;
  }
}
        /* 场景切换按钮容器 */
        .scene-btn-box {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 998;
        }

        /* 场景切换按钮样式 */
        .scene-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }

        /* 视频弹窗样式 */
        #videoModal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            z-index: 999;
        }

        /* 视频样式 */
        #videoModal video {
            width: 500px;
            height: 300px;
            outline: none;
            border: 3px solid #fff;
            border-radius: 8px;
        }

        /* 关闭视频按钮 */
        .close-video-btn {
            margin-top: 10px;
            padding: 8px 16px;
            cursor: pointer;
            background: #333;
            color: white;
            border: none;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- 全景图容器 -->
    <div id="panorama"></div>

    <!-- 播放视频按钮 -->
    <button class="play-btn" onclick="showVideo()">点击播放卓玛讲解视频</button>

    <!-- 场景切换按钮 -->
    <div class="scene-btn-box">
        <button class="scene-btn" style="background: #ff3333;" onclick='changeScene("test.jpg", "https://kailashtrek.online/wp-content/uploads/2026/01/KAILASH.mp4")'>转山起点</button>
        <button class="scene-btn" style="background: #2299ff;" onclick='changeScene("pass.jpg", "https://kailashtrek.online/wp-content/uploads/2026/01/KAILASH.mp4")'>第一垭口</button>
    </div>

    <!-- 视频弹窗 -->
    <div id="videoModal">
        <video controls autoplay>
            <source src="https://kailashtrek.online/wp-content/uploads/2026/01/KAILASH.mp4" type="video/mp4">
            你的浏览器不支持视频播放
        </video>
        <button class="close-video-btn" onclick="hideVideo()">关闭视频</button>
    </div>

    <script>
        // 初始化全景图（默认显示转山起点）
        pannellum.viewer('panorama', {
            "panorama": "pass.jpg",
            "autoLoad": true,
            "title": "冈仁波齐转山起点",
            "author": "转山向导卓玛"
        });

        // 显示视频
        function showVideo() {
            document.getElementById('videoModal').style.display = 'block';
            document.querySelector('.play-btn').style.display = 'none';
        }

        // 隐藏视频
        function hideVideo() {
            document.getElementById('videoModal').style.display = 'none';
            document.querySelector('.play-btn').style.display = 'block';
        }

        // 切换转山场景（全景图+视频）
        function changeScene(picUrl, videoUrl) {
             切换全景图
            pannellum.viewer('panorama', {
                "panorama": picUrl,
                "autoLoad": true,
                "title": picUrl === "test.jpg" ? "冈仁波齐转山起点" : "转山第一垭口"
            });
            // 切换视频源
            const videoSource = document.querySelector('video source');
            videoSource.src = videoUrl;
            document.querySelector('video').load();
            // 隐藏视频，让用户重新点击播放
            hideVideo();
        }// 藏式烟花JS（粘贴到<script>最后）
document.getElementById('panorama').addEventListener('click', function(e) {
  // 先清空旧烟花
  document.querySelectorAll('.firework').forEach(fw => fw.remove());
  
  // 创建烟花容器
  const firework = document.createElement('div');
  firework.className = 'firework';
  firework.style.left = `${e.clientX}px`;
  firework.style.top = `${e.clientY}px`;
  document.body.appendChild(firework);

  // 生成12个烟花粒子（圆形绽放）
  for (let i = 0; i < 12; i++) {
    const part = document.createElement('div');
    part.className = 'firework-part';
    part.style.transform = `rotate(${i * 30}deg) translateY(0)`;
    firework.appendChild(part);
  }

  // 2秒后删除烟花
  setTimeout(() => firework.remove(), 1500);
});
        // 粒子特效JS（粘贴到<script>最后）
// 经幡/青稞图片链接（免费素材）
const particleImages = [
  "https://img.freepik.com/free-png/tibetan-prayer-flag_1308-14504.jpg?w=360&t=st=1736446000~exp=1736446600~hmac=9a8b7c6d5e4f3g2h1j0k9l8m7n6b5v4c3x2s1d0f9g8h7j6k5l4m3n2b1v0c9x8s7d6f5g4h3j2k1l0",
  "https://img.freepik.com/free-photo/close-up-of-green-barley-field_1339-6417.jpg?w=360&t=st=1736446100~exp=1736446700~hmac=8b7c6d5e4f3g2h1j0k9l8m7n6b5v4c3x2s1d0f9g8h7j6k5l4m3n2b1v0c9x8s7d6f5g4h3j2k1l0"
];
// 点击全景生成粒子
document.getElementById('panorama').addEventListener('click', function(e) {
  // 获取点击位置
  const x = e.clientX;
  const y = e.clientY;
  // 生成3个粒子
  for (let i = 0; i < 3; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    // 随机选经幡/青稞
    const img = particleImages[Math.floor(Math.random() * particleImages.length)];
    particle.style.backgroundImage = `url(${img})`;
    // 随机大小和位置偏移
    const size = Math.random() * 30 + 10;
    particle.style.width = `${size}px`;
    particle.style.height = `${size}px`;
    particle.style.left = `${x + Math.random() * 20 - 10}px`;
    particle.style.top = `${y + Math.random() * 20 - 10}px`;
    // 添加到页面
    document.body.appendChild(particle);
    // 2秒后删除粒子
    setTimeout(() => {
      particle.remove();
    }, 2000);
  }
});
   // 垭口场景自动飘雪
function changeScene(picUrl, videoUrl) {
  // 原来的代码...
  // 清空旧雪
  document.querySelectorAll('.snow').forEach(s => s.remove());
  // 垭口场景加雪
  if (picUrl === "pass.jpg") {
    for (let i=0; i<20; i++) {
      const snow = document.createElement('div');
      snow.className = 'snow';
      snow.style.left = `${Math.random()*100}vw`;
      snow.style.animationDelay = `${Math.random()*5}s`;
      document.body.appendChild(snow);
    }
  }
} </script>
</body>
</html>






